<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - ShadowPlex</title>
    <link rel="stylesheet" href="admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>ShadowPlex</h1>
                <span>Admin Panel</span>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#dashboard" class="nav-link active" data-section="dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            Dashboard
                        </a>
                    </li>
                    <li>
                        <a href="#movies" class="nav-link" data-section="movies">
                            <i class="fas fa-film"></i>
                            Movies
                        </a>
                    </li>
                    <li>
                        <a href="#web-series" class="nav-link" data-section="web-series">
                            <i class="fas fa-tv"></i>
                            Web Series
                        </a>
                    </li>
                    <li>
                        <a href="#upload" class="nav-link" data-section="upload">
                            <i class="fas fa-upload"></i>
                            Upload Content
                        </a>
                    </li>
                    <li>
                        <a href="#settings" class="nav-link" data-section="settings">
                            <i class="fas fa-cog"></i>
                            Settings
                        </a>
                    </li>
                    <li>
                        <a href="#database" class="nav-link" data-section="database">
                            <i class="fas fa-database"></i>
                            Database
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="admin-header">
                <div class="header-left">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="pageTitle">Dashboard</h1>
                </div>
                <div class="header-right">
                    <span class="admin-info">Welcome, Admin</span>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard-section" class="content-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-film"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalMovies">0</h3>
                            <p>Total Movies</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-tv"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalSeries">0</h3>
                            <p>Web Series</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-upload"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="todayUploads">0</h3>
                            <p>Today's Uploads</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="avgRating">0.0</h3>
                            <p>Avg Rating</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Recent Activity</h3>
                        <div id="recentActivity" class="activity-list">
                            <p class="no-activity">No recent activity</p>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <h3>Quick Stats</h3>
                        <div class="quick-stats">
                            <div class="stat-item">
                                <span class="stat-label">Total Downloads</span>
                                <span class="stat-value" id="totalDownloads">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">This Week</span>
                                <span class="stat-value" id="weekUploads">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">This Month</span>
                                <span class="stat-value" id="monthUploads">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Movies Section -->
            <section id="movies-section" class="content-section">
                <div class="section-header">
                    <h2>Manage Movies</h2>
                    <div class="section-actions">
                        <input type="text" id="movieSearch" placeholder="Search movies..." class="search-input">
                        <button class="btn btn-primary" onclick="showSection('upload')">
                            <i class="fas fa-plus"></i> Add Movie
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table" id="moviesTable">
                        <thead>
                            <tr>
                                <th>Poster</th>
                                <th>Title</th>
                                <th>Year</th>
                                <th>Rating</th>
                                <th>Genres</th>
                                <th>Upload Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="moviesTableBody">
                            <tr>
                                <td colspan="7" class="loading-row">Loading movies...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Web Series Section -->
            <section id="web-series-section" class="content-section">
                <div class="section-header">
                    <h2>Manage Web Series</h2>
                    <div class="section-actions">
                        <input type="text" id="seriesSearch" placeholder="Search series..." class="search-input">
                        <button class="btn btn-primary" onclick="showSection('upload')">
                            <i class="fas fa-plus"></i> Add Series
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table" id="seriesTable">
                        <thead>
                            <tr>
                                <th>Poster</th>
                                <th>Title</th>
                                <th>Seasons</th>
                                <th>Rating</th>
                                <th>Genres</th>
                                <th>Upload Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="seriesTableBody">
                            <tr>
                                <td colspan="7" class="loading-row">Loading web series...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Upload Section -->
            <section id="upload-section" class="content-section">
                <div class="section-header">
                    <h2>Upload Content</h2>
                    <div class="upload-tabs">
                        <button class="tab-btn active" data-tab="movie">Movie</button>
                        <button class="tab-btn" data-tab="web-series">Web Series</button>
                    </div>
                </div>
                
                <div class="upload-container">
                    <!-- Movie Upload Form -->
                    <div id="movie-upload-form" class="upload-form-container active">
                        <form class="upload-form" id="uploadMovieForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="movieTitle">Title *</label>
                                    <input type="text" id="movieTitle" name="title" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="movieYear">Year</label>
                                    <input type="number" id="movieYear" name="year" min="1900" max="2030">
                                </div>
                                
                                <div class="form-group">
                                    <label for="moviePoster">Poster URL</label>
                                    <input type="url" id="moviePoster" name="poster_url" placeholder="https://example.com/poster.jpg">
                                </div>
                                
                                <div class="form-group">
                                    <label for="movieBackdrop">Backdrop URL</label>
                                    <input type="url" id="movieBackdrop" name="backdrop_url" placeholder="https://example.com/backdrop.jpg">
                                </div>
                                
                                <div class="form-group full-width">
                                    <label for="movieDescription">Description</label>
                                    <textarea id="movieDescription" name="description" rows="3" placeholder="Brief description..."></textarea>
                                </div>
                                
                                <div class="form-group full-width">
                                    <label>Download Links</label>
                                    <div id="movieDownloadLinks">
                                        <div class="download-link-item">
                                            <input type="text" placeholder="Quality (e.g., 4K, 1080p)" class="quality-input">
                                            <input type="url" placeholder="Download URL" class="url-input">
                                            <button type="button" class="remove-link-btn" onclick="removeDownloadLink(this)">
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <button type="button" class="add-link-btn" onclick="addDownloadLink('movie')">
                                        <i class="fas fa-plus"></i> Add Download Link
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-upload"></i> Upload Movie
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="clearForm('uploadMovieForm')">
                                    <i class="fas fa-eraser"></i> Clear
                                </button>
                            </div>
                            
                            <div class="upload-status" id="movieUploadStatus" style="display: none;"></div>
                        </form>
                    </div>
                    
                    <!-- Web Series Upload Form -->
                    <div id="web-series-upload-form" class="upload-form-container">
                        <form class="upload-form" id="uploadSeriesForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="seriesTitle">Title *</label>
                                    <input type="text" id="seriesTitle" name="title" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="seriesSeasons">Seasons</label>
                                    <input type="number" id="seriesSeasons" name="number_of_seasons" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="seriesPoster">Poster URL</label>
                                    <input type="url" id="seriesPoster" name="poster_url">
                                </div>
                                
                                <div class="form-group">
                                    <label for="seriesBackdrop">Backdrop URL</label>
                                    <input type="url" id="seriesBackdrop" name="backdrop_url">
                                </div>
                                
                                <div class="form-group full-width">
                                    <label for="seriesDescription">Description</label>
                                    <textarea id="seriesDescription" name="description" rows="3"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-upload"></i> Upload Series
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="clearForm('uploadSeriesForm')">
                                    <i class="fas fa-eraser"></i> Clear
                                </button>
                            </div>
                            
                            <div class="upload-status" id="seriesUploadStatus" style="display: none;"></div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings-section" class="content-section">
                <div class="section-header">
                    <h2>Settings & Configuration</h2>
                </div>
                
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>API Configuration</h3>
                        <div class="setting-item">
                            <label for="tmdbApiKey">TMDB API Key</label>
                            <input type="password" id="tmdbApiKey" placeholder="Enter your TMDB API key">
                            <small>Get your API key from <a href="https://www.themoviedb.org/settings/api" target="_blank">TMDB</a></small>
                        </div>
                        <div class="setting-item">
                            <label for="emailNotifications">Email Notifications</label>
                            <select id="emailNotifications">
                                <option value="true">Enabled</option>
                                <option value="false">Disabled</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="saveApiSettings()">Save API Settings</button>
                    </div>
                    
                    <div class="settings-card">
                        <h3>Email Configuration</h3>
                        <div class="setting-item">
                            <label for="emailUser">Email Address</label>
                            <input type="email" id="emailUser" placeholder="your-email@gmail.com">
                        </div>
                        <div class="setting-item">
                            <label for="emailPass">App Password</label>
                            <input type="password" id="emailPass" placeholder="App-specific password">
                        </div>
                        <button class="btn btn-primary" onclick="testEmailSettings()">Test Email</button>
                    </div>
                    
                    <div class="settings-card">
                        <h3>Site Settings</h3>
                        <div class="setting-item">
                            <label for="siteName">Site Name</label>
                            <input type="text" id="siteName" placeholder="ShadowPlex">
                        </div>
                        <div class="setting-item">
                            <label for="siteTagline">Site Tagline</label>
                            <input type="text" id="siteTagline" placeholder="Premium Movies & Web Series">
                        </div>
                        <button class="btn btn-primary" onclick="saveSiteSettings()">Save Settings</button>
                    </div>
                </div>
            </section>

            <!-- Database Section -->
            <section id="database-section" class="content-section">
                <div class="section-header">
                    <h2>Database Management</h2>
                </div>
                
                <div class="database-grid">
                    <div class="database-card">
                        <h3>Database Statistics</h3>
                        <div class="db-stats">
                            <div class="db-stat">
                                <span class="db-label">Total Records</span>
                                <span class="db-value" id="totalRecords">0</span>
                            </div>
                            <div class="db-stat">
                                <span class="db-label">Database Size</span>
                                <span class="db-value" id="dbSize">0 MB</span>
                            </div>
                            <div class="db-stat">
                                <span class="db-label">Last Backup</span>
                                <span class="db-value" id="lastBackup">Never</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="database-card">
                        <h3>Maintenance Tools</h3>
                        <div class="maintenance-tools">
                            <button class="btn btn-secondary" onclick="backupDatabase()">
                                <i class="fas fa-download"></i> Backup Database
                            </button>
                            <button class="btn btn-warning" onclick="optimizeDatabase()">
                                <i class="fas fa-wrench"></i> Optimize Database
                            </button>
                            <button class="btn btn-danger" onclick="clearCache()">
                                <i class="fas fa-trash"></i> Clear Cache
                            </button>
                        </div>
                    </div>
                    
                    <div class="database-card">
                        <h3>Import/Export</h3>
                        <div class="import-export">
                            <input type="file" id="importFile" accept=".json,.csv" style="display: none;">
                            <button class="btn btn-primary" onclick="document.getElementById('importFile').click()">
                                <i class="fas fa-upload"></i> Import Data
                            </button>
                            <button class="btn btn-secondary" onclick="exportData()">
                                <i class="fas fa-download"></i> Export Data
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <h3>Confirm Delete</h3>
            <p>Are you sure you want to delete this item? This action cannot be undone.</p>
            <div class="modal-actions">
                <button class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                <button class="btn btn-secondary" onclick="closeDeleteModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Processing...</p>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>
